<!DOCTYPE html>

<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Neural Network Explorer: {% block title %}{% endblock %}</title>
        <script src = "https://d3js.org/d3.v4.min.js"></script>
    </head>
        
    <body>
        <div id="neuralNet" style="margin:50px;">
            <svg id="networkGraph"></svg>
        </div>

        <script type="text/javascript">
            {% block main %}{% endblock %}

            var nodeSize = 15;

            // Draw the nodes
            var svg = d3.select("#networkGraph");
            svg.selectAll("circle")                     
                .data(newGraph.nodes)                   // Do the following for each item in newGraph.nodes
                .enter()                                // Create a new empty DOM placeholder 
                .append("circle")                       // Append a "circle" to the empty DOM placeholder
                .attr("stroke", "black")
                .attr("fill", "white")
                .attr("r", nodeSize)
                .attr("cx", function(d) {               // Set the x coordinate using an anonymous function that accepts the current "data item"
                    return ((d.layer * 500) + 100);     // Use 500px spacing between layers; use a 100px offset because this coordinate is the center of the circle
                })
                .attr("cy", function(d) {               // Set the y coordinate using an anonymous function that accepts the current "data item"
                    return ((d.label * 40) + 100);      // Use 40px spacing between nodes; use a 100px offset because this coordinate is the center of the circle
                });

            // Add labels for the nodes.    
            svg.selectAll("text")                     
                .data(newGraph.nodes)
                .enter()
                .append("text")
                .text(function(d) {               
                    return d.label;      
                })
                .attr("x", function(d) {
                    return ((d.layer * 500) + 95);
                })
                .attr("y", function(d) {
                    return ((d.label * 40) + 105);
                });


            // Set the height and width of the SVG to those of the bounding box (so we can see all nodes)
            var  svg_container = document.getElementById("networkGraph");
            var  bbox = svg_container.getBBox();
            svg_container.setAttribute("width", bbox.x + bbox.width + bbox.x);
            svg_container.setAttribute("height", bbox.y + bbox.height + bbox.y);

            // Successful: printing nodes
            // Successful: labeling nodes
            // To do: Connect nodes
            // Looking at: https://d3-graph-gallery.com/graph/network_basic.html

            //console.log("drawing   " + new Date());
        </script>
    </body>
</html>